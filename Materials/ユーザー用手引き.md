# PRM Tool - ユーザー用手引き

**Partner Relationship Management Tool**  
**Version 1.0.0**  
**最終更新**: 2026年1月21日

---

## 📋 目次

1. [はじめに](#1-はじめに)
2. [ログイン方法](#2-ログイン方法)
3. [アカウント管理](#3-アカウント管理)
4. [パートナー管理](#4-パートナー管理)
5. [案件管理](#5-案件管理)
6. [手数料管理](#6-手数料管理)
7. [請求管理](#7-請求管理)
8. [ダッシュボード](#8-ダッシュボード)
9. [トラブルシューティング](#9-トラブルシューティング)

---

## 1. はじめに

### 1.1 PRM Toolとは

PRM Tool（Partner Relationship Management Tool）は、パートナー企業との関係管理、案件管理、手数料管理、請求管理を統合的に行うためのWebアプリケーションです。

### 1.2 主な機能

- **ユーザー管理（ADMIN、REP）**
- **パートナー企業の情報管理**
- **案件の作成と進捗管理**
- **手数料の申請・承認・支払い管理**
- **請求書の作成と管理**
- **統計ダッシュボード**

### 1.3 対象ユーザー

| ロール | 説明 | 権限 |
|--------|------|------|
| **管理者（ADMIN）** | システムの全機能を利用可能 | 全機能の閲覧・編集・削除 |
| **担当者（REP）** | 案件・手数料・請求の管理が可能 | パートナーは閲覧のみ、他は編集可 |

### 1.4 システム要件

#### ブラウザ
- Chrome 90以上
- Firefox 88以上
- Microsoft Edge 90以上
- Safari 14以上

#### その他
- インターネット接続：必須
- 画面解像度：1280x720以上推奨

---

## 2. ログイン方法

### 2.1 ログイン手順

1. **ブラウザでアプリケーションURLにアクセス**
   ```
   https://prmtool-frontend.onrender.com
   ```

2. **ログイン画面で以下を入力**
   - ログインID（管理者から発行されたID）
   - パスワード（8文字以上）

3. **「ログイン」ボタンをクリック**

4. **認証成功後、ダッシュボード画面に移動**

### 2.2 ログアウト方法

1. **画面右上のユーザー名をクリック**

2. **ドロップダウンメニューから「ログアウト」を選択**

### 2.3 注意事項

- パスワードは8文字以上で設定してください
- セッションは24時間で自動的に切れます
- 長時間操作がない場合、再ログインが必要になることがあります

---

## 3. アカウント管理

### 3.1 アクセス権限

**管理者（ADMIN）のみ**

### 3.2 ユーザー一覧の表示

1. **画面左のメニューから「アカウント管理」を選択**
2. **登録されているユーザーの一覧が表示されます**

表示項目：
- 名前
- ログインID
- メールアドレス
- 電話番号
- 役職
- ロール（管理者 / 担当者）

### 3.3 新規ユーザーの作成

1. **画面右上の「新規作成」ボタンをクリック**

2. **以下の情報を入力**

| 項目 | 必須 | 制約 |
|------|------|------|
| 名前 | ✅ | 1-100文字 |
| ログインID | ✅ | 3-50文字、英数字のみ、重複不可 |
| パスワード | ✅ | 8文字以上 |
| パスワード確認 | ✅ | パスワードと一致 |
| メールアドレス | ✅ | メール形式 |
| 電話番号 | ❌ | - |
| 住所 | ❌ | - |
| 役職 | ❌ | - |
| ロール | ✅ | ADMIN または REP |

3. **「保存」ボタンをクリック**

### 3.4 ユーザーの編集

1. **編集したいユーザーの「編集」ボタンをクリック**
2. **情報を修正**（ログインIDは変更できません）
3. **「保存」ボタンをクリック**

### 3.5 ユーザーの削除

1. **削除したいユーザーの「削除」ボタンをクリック**
2. **確認ダイアログで「削除」を選択**

**注意**: システム保護されたアカウントは削除できません

### 3.6 検索機能

- **検索ボックス**: 名前、ログインID、メール、電話番号、役職で検索
- **ロールフィルター**: 全て / 管理者 / 担当者

---

## 4. パートナー管理

### 4.1 アクセス権限

- **閲覧**: ADMIN、REP
- **編集・削除**: ADMINのみ

### 4.2 パートナー一覧の表示

1. **メニューから「パートナー」を選択**
2. **会社名、業種、連絡先が表示されます**

### 4.3 新規パートナーの作成

1. **「新規作成」ボタンをクリック**

2. **以下を入力**

| 項目 | 必須 | 説明 |
|------|------|------|
| 会社名 | ✅ | 1-200文字 |
| 業種 | ❌ | 1-100文字 |
| 代表電話 | ❌ | 1-200文字 |
| 住所 | ❌ | 1-100文字 |
| 担当者 | ✅ | 複数入力可 |

**例**:
```
|企業名*|
株式会社サンプル
|業種|
製造業
|代表電話番号|
06ｰ××××ｰ××××
|住所|
東京都××区××
|担当者*|
田中太郎 tanaka@example.com
山田花子 yamada@example.com

```

3. **「保存」をクリック**

### 4.4 パートナーの編集

1. **編集したいパートナーの「編集」ボタンをクリック**
2. **情報を修正**
3. **「保存」をクリック**

### 4.5 パートナーの削除

1. **削除したいパートナーの「削除」ボタンをクリック**
2. **確認ダイアログで「削除」を選択**

**注意**: 関連する案件が存在する場合は削除できません

### 4.6 CSV入出力

#### CSVエクスポート
1. **「CSVエクスポート」ボタンをクリック**
2. **全パートナー情報がCSVファイルでダウンロードされます**

#### CSVインポート
1. **「CSVインポート」ボタンをクリック**
2. **CSVファイルを選択**
3. **「アップロード」をクリック**

**CSV形式**:
```csv
パートナー名,業種,代表電話,住所,担当者名,担当者連絡先
サンプル企業A,IT・通信,03-1234-5678,東京都渋谷区,"山田太郎,佐藤花子","yamada@example.com,sato@example.com"
サンプル企業B,製造業,03-2345-6789,大阪府大阪市,田中次郎,tanaka@example.com
サンプル企業C,金融・保険,03-3456-7890,福岡県福岡市,"鈴木一郎,高橋美咲,伊藤健太","suzuki@example.com,takahashi@example.com,ito@example.com"
```

**注意**: UTF-8エンコーディングのCSVファイルを使用してください

### 4.7 パートナーダッシュボード

1. **詳細ボタンをクリック**
2. **パートナー専用の統計情報を確認**
   - 関連案件数
   - 手数料総額
   - 請求総額

---

## 5. 案件管理

### 5.1 アクセス権限

**ADMIN、REP**

### 5.2 案件一覧の表示

1. **メニューから「案件」を選択**
2. **案件名、パートナー、ステータス、担当者が表示されます**

### 5.3 新規案件の作成

1. **「新規作成」ボタンをクリック**

2. **以下を入力**

| 項目 | 必須 | 説明 |
|------|------|------|
| 案件名 | ✅ | 1-200文字 |
| パートナー | ✅ | ドロップダウンから選択 |
| ステータス | ✅ | 新規 / 進行中 / 完了 |
| 担当者 | ❌ | チェックボックスで複数選択可 |

3. **担当者の選択**
   - チェックボックスで複数選択可能
   - 検索機能で担当者を絞り込める
   - ページネーション機能あり（1ページ5件）

4. **「保存」をクリック**
   - 作成者が自動的にオーナーとして設定されます

### 5.4 案件の編集

1. **編集したい案件の「編集」ボタンをクリック**
2. **情報を修正**
3. **担当者の追加・削除が可能**
4. **「保存」をクリック**

### 5.5 案件の削除（ADMINのみ）

1. **削除したい案件の「削除」ボタンをクリック**
2. **確認ダイアログで「削除」を選択**

---

## 6. 手数料管理

### 6.1 アクセス権限

**ADMIN、REP**

### 6.2 手数料一覧の表示

1. **メニューから「手数料」を選択**
2. **案件名、金額、ステータス、日付が表示されます**

### 6.3 新規手数料の作成

1. **「新規作成」ボタンをクリック**

2. **以下を入力**

| 項目 | 必須 | 説明 |
|------|------|------|
| 案件 | ✅ | ドロップダウンから選択 |
| パートナー | ✅ | ドロップダウンから選択 |
| 基準金額 | ✅ | 数値スピナー(0～) 1刻み|
| 手数料率 (%) | ✅ | 数値スピナー(0～) 0.01刻み |
| ステータス | ✅ | 保留中 / 承認済み / 支払済み |
| 日付 | ✅ | カレンダーから選択 |
| 備考 | ❌ | 自由記入可能 |

※基準金額とは：手数料を算出する際に、その算定基準として用いられる金額。

3. **「保存」をクリック**

### 6.4 ステータスの意味

| ステータス | 英語表記 | 説明 |
|----------|---------|------|
| 保留中 | PENDING | 申請中の状態 |
| 承認済み | APPROVED | 承認が完了した状態 |
| 支払済み | PAID | 支払いが完了した状態 |

### 6.5 手数料の編集

1. **編集したい手数料の「編集」ボタンをクリック**
2. **金額やステータスを変更**
3. **「保存」をクリック**

### 6.6 手数料の削除（ADMINのみ）

1. **削除したい手数料の「削除」ボタンをクリック**
2. **確認ダイアログで「削除」を選択**

### 6.7 CSV入出力

#### CSVエクスポート
- 手数料情報をCSVファイルで出力

#### CSVインポート
- CSVファイルから一括登録

**CSV形式**:
```csv
案件名,金額,ステータス,日付
新規案件,100000,PENDING,2026-01-21
```

---

## 7. 請求管理

### 7.1 アクセス権限

**ADMIN、REP**

### 7.2 請求一覧の表示

1. **メニューから「請求」を選択**
2. **パートナー名、請求日、金額（小計・消費税・合計）が表示されます**

### 7.3 新規請求の作成

1. **「新規作成」ボタンをクリック**

2. **基本情報を入力**

| 項目 | 必須 | 説明 |
|------|------|------|
| パートナー | ✅ | ドロップダウンから選択 |
| 請求日 | ✅ | カレンダーから選択 |

3. **請求明細を追加**

| 項目 | 必須 | 説明 |
|------|------|------|
| 品目 | ✅ | 商品・サービス名 |
| 数量 | ✅ | 整数で入力 |
| 単価 | ✅ | 数値で入力 |
| 小計 | - | 自動計算（数量 × 単価） |

4. **「明細追加」ボタンで複数の明細を追加可能**

5. **「保存」をクリック**
   - 消費税（10%）と合計が自動的に計算されます

**計算式**:
```
小計 = 数量 × 単価
消費税 = 小計 × 0.10
合計 = 小計 + 消費税
```

### 7.4 請求の編集

1. **編集したい請求の「編集」ボタンをクリック**
2. **基本情報や明細を修正**
3. **明細の追加・変更・削除が可能**
4. **「保存」をクリック**
   - 金額は自動的に再計算されます

### 7.5 請求の削除（ADMINのみ）

1. **削除したい請求の「削除」ボタンをクリック**
2. **確認ダイアログで「削除」を選択**

**注意**: 明細も同時に削除されます

### 7.6 CSV入出力

#### CSVエクスポート
- 請求情報をCSVファイルで出力

#### CSVインポート
- CSVファイルから一括登録

**CSV形式**:
```csv
パートナー会社名,請求日,品目1,数量1,単価1,品目2,数量2,単価2
株式会社A,2026-01-21,商品A,10,1000,商品B,5,2000
```

---

## 8. ダッシュボード

### 8.1 アクセス権限

**ADMIN、REP**

### 8.2 メインダッシュボード

ログイン後のホーム画面として表示されます。

#### タブ構成

**1. 概要タブ**
- アカウント数
- パートナー数
- 案件数（ステータス別）
- 手数料総額
- 請求総額

**2. パートナータブ**
- 業種別分布
- 上位パートナー一覧

**3. 案件タブ**
- ステータス別分布
- パートナー別案件数

**4. 手数料タブ**
- ステータス別分布
- 月別推移グラフ

**5. 請求タブ**
- 月別請求総額
- パートナー別請求額

### 8.3 パートナーダッシュボード

パートナー管理画面から「詳細」ボタンをクリックすると、パートナー専用の統計情報を確認できます。

**表示内容**:
- パートナー基本情報
- 関連案件一覧
- 手数料総額
- 請求総額

---

## 9. トラブルシューティング

### 9.1 よくある質問と解決方法

#### Q1: ログインできません

**A**: 以下を確認してください
- ログインIDとパスワードが正しいか確認
- 大文字と小文字を区別しますので注意
- 管理者に連絡してアカウントの状態を確認

#### Q2: パスワードを忘れてしまいました

**A**: 管理者（ADMIN）に連絡してパスワードのリセットを依頼してください

#### Q3: データが保存されません

**A**: 以下を確認してください
- 必須項目が全て入力されているか確認
- エラーメッセージが表示されている場合は内容を確認
- ブラウザを更新（F5キー）して再度試行

#### Q4: CSVインポートに失敗します

**A**: 以下を確認してください
- ファイル形式がCSVであることを確認
- UTF-8エンコーディングで保存されているか確認
- CSVファイルのフォーマットが正しいか確認
- サンプルCSVファイルと比較

#### Q5: 画面が正しく表示されません

**A**: 以下を試してください
- ブラウザのキャッシュをクリア
- 推奨ブラウザ（Chrome 90+、Firefox 88+等）を使用
- ブラウザを最新版にアップデート

#### Q6: 「権限がありません」と表示されます

**A**: 以下を確認してください
- ログインしているユーザーのロールを確認
- 該当機能へのアクセス権限があるか確認
- 必要に応じて管理者に権限付与を依頼

#### Q7: セッションが切れてしまいます

**A**: セッションは24時間で自動的に切れます
- 再度ログインしてください
- 長時間使用する場合は定期的に画面を操作してください

### 9.2 エラーメッセージ一覧

| エラーメッセージ | 原因 | 解決方法 |
|---------------|------|---------|
| 「ログインIDまたはパスワードが正しくありません」 | 認証情報が不正 | IDとパスワードを確認 |
| 「このアカウントは無効です」 | アカウントが無効化されている | 管理者に連絡 |
| 「必須項目を入力してください」 | 必須フィールドが未入力 | 全ての必須項目を入力 |
| 「ログインIDは既に使用されています」 | IDが重複 | 別のIDを使用 |
| 「権限がありません」 | アクセス権限不足 | 管理者に権限確認 |

### 9.3 お問い合わせ

上記の方法で問題が解決しない場合は、以下の情報を添えてシステム管理者に連絡してください：

- **発生した問題の内容**
- **エラーメッセージ（表示された場合）**
- **操作手順**
- **使用しているブラウザとバージョン**
- **スクリーンショット（可能な場合）**

---

## 付録

### A. ショートカットキー

| キー | 機能 |
|------|------|
| `F5` | ページ更新 |
| `Ctrl + F5` | 強制リロード（キャッシュクリア） |
| `Esc` | モーダルを閉じる |

### B. 用語集

| 用語 | 説明 |
|------|------|
| PRM | Partner Relationship Management（パートナー関係管理） |
| ADMIN | 管理者ロール |
| REP | 担当者ロール |
| CSV | Comma-Separated Values（カンマ区切り値） |
| JWT | JSON Web Token（認証トークン） |

---

**最終更新**: 2026年1月21日  
**バージョン**: 1.0.0
