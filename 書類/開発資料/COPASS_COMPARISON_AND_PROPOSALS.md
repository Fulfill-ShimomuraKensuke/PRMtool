# CoPASS機能比較と追加機能提案

**作成日**: 2026-01-22  
**バージョン**: PRMTool v2.1.0 → v3.0.0（提案）

---

## 📊 現状分析

### CoPASSの機能構成

CoPASSは3つの主要カテゴリで構成されています：

#### 1. 代理店開拓（パートナーの開拓）
- 代理店検索
- 代理店オファー
- 自動マッチング

#### 2. 代理店活性化（パートナーのアクティブ化）
- コンテンツ共有
- eラーニング
- チャット
- 代理店/担当者別ダッシュボード

#### 3. 代理店管理（パートナー業務の効率化）
- 業務データ一元管理
- 手数料自動集計
- 請求書発行/送付
- CRMツール連携

---

## ✅ 現在のPRMToolで実装済みの機能

| カテゴリ | 機能 | 実装状況 | 備考 |
|---------|------|----------|------|
| **代理店管理** | 業務データ一元管理 | ✅ 実装済み | パートナー、案件、手数料、請求書の一元管理 |
| **代理店管理** | 手数料自動集計 | ✅ 実装済み | 手数料ルールに基づく自動計算、ダッシュボードで集計表示 |
| **代理店管理** | 請求書発行 | ✅ 実装済み | 請求書作成・発行・支払管理 |
| **代理店活性化** | 代理店/担当者別ダッシュボード | ✅ 実装済み | パートナー別ダッシュボード、統計情報表示 |

---

## ❌ 現在のPRMToolで未実装の機能

| カテゴリ | 機能 | 優先度 | 実装難易度 |
|---------|------|--------|------------|
| **代理店開拓** | 代理店検索 | 高 | 中 |
| **代理店開拓** | 代理店オファー | 高 | 中 |
| **代理店開拓** | 自動マッチング | 中 | 高 |
| **代理店活性化** | コンテンツ共有 | 高 | 中 |
| **代理店活性化** | eラーニング | 中 | 高 |
| **代理店活性化** | チャット | 高 | 中 |
| **代理店管理** | 請求書送付 | 中 | 低 |
| **代理店管理** | CRMツール連携 | 低 | 高 |

---

## 🎯 追加機能提案（優先度順）

### Phase 1: 基本的なコミュニケーション機能（高優先度）

#### 1.1 チャット機能
**目的**: パートナーとの迅速なコミュニケーション

**機能詳細**:
- パートナーごとのチャットルーム
- 案件ごとのチャットルーム
- リアルタイムメッセージング
- ファイル添付機能
- 既読/未読管理
- 通知機能

**実装技術**:
- WebSocket（リアルタイム通信）
- ファイルアップロード機能
- 通知システム

**想定画面**:
```
┌─────────────────────────────────────────┐
│ チャット - 株式会社サンプル            │
├─────────────────────────────────────────┤
│ [案件A] [案件B] [全般]                  │
├─────────────────────────────────────────┤
│ 田中太郎（パートナー）  10:30           │
│ 見積書の件、確認しました。              │
│                                         │
│              山田花子（自社）  10:32    │
│              ありがとうございます。     │
│              [添付: 契約書.pdf]         │
│                                         │
│ [メッセージを入力...]        [送信]    │
└─────────────────────────────────────────┘
```

**データ構造**:
```java
// ChatRoom エンティティ
- id
- partnerId（パートナーID）
- projectId（案件ID、nullable）
- type（PARTNER / PROJECT / GENERAL）

// ChatMessage エンティティ
- id
- chatRoomId
- senderId（送信者ID）
- message（メッセージ内容）
- attachmentUrl（添付ファイルURL、nullable）
- isRead（既読フラグ）
- createdAt
```

---

#### 1.2 コンテンツ共有機能
**目的**: パートナーへの情報提供と教育

**機能詳細**:
- ドキュメントライブラリ
- カテゴリ別整理
- 検索機能
- ダウンロード履歴
- 閲覧権限管理
- バージョン管理

**コンテンツタイプ**:
- 製品カタログ
- 価格表
- 営業資料
- マニュアル
- FAQ
- 契約書テンプレート

**想定画面**:
```
┌─────────────────────────────────────────┐
│ コンテンツライブラリ                    │
├─────────────────────────────────────────┤
│ [カテゴリ] [検索]                       │
│                                         │
│ 📁 製品カタログ                         │
│   └ 📄 製品Aカタログ_v2.pdf (2026-01-20)│
│   └ 📄 製品Bカタログ_v1.pdf (2026-01-15)│
│                                         │
│ 📁 営業資料                             │
│   └ 📄 提案書テンプレート.pptx          │
│   └ 📄 価格表_2026Q1.xlsx               │
│                                         │
│ 📁 マニュアル                           │
│   └ 📄 操作マニュアル_v3.pdf            │
└─────────────────────────────────────────┘
```

**データ構造**:
```java
// Content エンティティ
- id
- title（タイトル）
- category（カテゴリ）
- fileUrl（ファイルURL）
- version（バージョン）
- description（説明）
- isPublic（公開フラグ）
- targetPartnerIds（対象パートナーID、nullable）
- uploadedBy（アップロード者ID）
- uploadedAt
- downloadCount（ダウンロード数）

// ContentDownloadHistory エンティティ
- id
- contentId
- userId
- partnerId
- downloadedAt
```

---

#### 1.3 請求書送付機能
**目的**: 請求書の電子送付と管理

**機能詳細**:
- メール送信機能
- PDF自動生成
- 送付履歴管理
- 開封確認（オプション）
- 再送機能
- テンプレートカスタマイズ

**想定フロー**:
```
1. 請求書を「発行済」に変更
   ↓
2. 「請求書を送付」ボタンをクリック
   ↓
3. 送付先メールアドレス確認
   ↓
4. メール件名・本文編集
   ↓
5. 送信
   ↓
6. 送付履歴に記録
```

**メールテンプレート**:
```
件名: 【請求書送付】{請求書番号} - {パートナー名}

本文:
{パートナー名} 御中

平素より大変お世話になっております。
{会社名}の{担当者名}です。

下記の通り、請求書を送付いたします。

━━━━━━━━━━━━━━━━━━━━━━
請求書番号: {請求書番号}
発行日: {発行日}
支払期限: {支払期限}
請求金額: {合計金額}円（税込）
━━━━━━━━━━━━━━━━━━━━━━

添付の請求書をご確認ください。

ご不明な点がございましたら、お気軽にお問い合わせください。

{会社名}
{担当者名}
```

**データ構造**:
```java
// InvoiceDelivery エンティティ
- id
- invoiceId
- recipientEmail（送付先メールアドレス）
- subject（件名）
- body（本文）
- sentAt（送信日時）
- sentBy（送信者ID）
- isOpened（開封フラグ、オプション）
- openedAt（開封日時、オプション）
```

---

### Phase 2: パートナー開拓機能（中優先度）

#### 2.1 代理店検索機能
**目的**: 新規パートナー候補の発見

**機能詳細**:
- パートナーデータベース
- 詳細検索（業種、地域、規模、実績など）
- 検索条件保存
- お気に入り登録
- 検索履歴

**想定画面**:
```
┌─────────────────────────────────────────┐
│ パートナー検索                          │
├─────────────────────────────────────────┤
│ 業種: [IT ▼]                            │
│ 地域: [関東 ▼]                          │
│ 規模: [中小企業 ▼]                      │
│ キーワード: [_________]      [検索]    │
├─────────────────────────────────────────┤
│ 検索結果: 23件                          │
│                                         │
│ 🏢 株式会社テックソリューション        │
│    業種: IT | 所在地: 東京都            │
│    実績: 5年 | 評価: ★★★★☆            │
│    [詳細] [オファー送信]                │
│                                         │
│ 🏢 株式会社デジタルパートナーズ        │
│    業種: IT | 所在地: 神奈川県          │
│    実績: 3年 | 評価: ★★★★★            │
│    [詳細] [オファー送信]                │
└─────────────────────────────────────────┘
```

**データ構造**:
```java
// PartnerCandidate エンティティ（候補パートナー）
- id
- companyName（企業名）
- industry（業種）
- region（地域）
- companySize（企業規模）
- experience（実績年数）
- rating（評価）
- contactEmail（連絡先メール）
- contactPhone（連絡先電話）
- description（説明）
- isActive（アクティブフラグ）

// PartnerSearchHistory エンティティ
- id
- userId
- searchConditions（検索条件JSON）
- searchedAt
```

---

#### 2.2 代理店オファー機能
**目的**: 候補パートナーへの提携提案

**機能詳細**:
- オファーテンプレート
- 一括送信
- 送信履歴管理
- 返信追跡
- リマインド機能

**想定フロー**:
```
1. パートナー候補を検索
   ↓
2. 「オファー送信」をクリック
   ↓
3. オファー内容を編集
   ↓
4. 送信
   ↓
5. オファー履歴に記録
   ↓
6. パートナーが承諾
   ↓
7. 正式なパートナーとして登録
```

**オファーテンプレート**:
```
件名: 【業務提携のご提案】{会社名}

本文:
{候補企業名} 御中

突然のご連絡、失礼いたします。
{会社名}の{担当者名}と申します。

弊社は{業種}の分野で{サービス内容}を提供しており、
貴社との業務提携の可能性を探らせていただきたく、
ご連絡いたしました。

【提携メリット】
・{メリット1}
・{メリット2}
・{メリット3}

詳細につきましては、ぜひ一度お話しさせていただければ幸いです。

ご検討のほど、よろしくお願い申し上げます。
```

**データ構造**:
```java
// PartnerOffer エンティティ
- id
- candidateId（候補パートナーID）
- subject（件名）
- body（本文）
- status（ステータス: SENT / OPENED / ACCEPTED / DECLINED）
- sentAt
- sentBy
- respondedAt（返信日時）
- response（返信内容）

// OfferTemplate エンティティ
- id
- name（テンプレート名）
- subject（件名テンプレート）
- body（本文テンプレート）
- createdBy
- createdAt
```

---

#### 2.3 自動マッチング機能
**目的**: AIによる最適なパートナー候補の提案

**機能詳細**:
- 案件内容に基づくマッチング
- 過去の実績に基づくレコメンド
- 適合度スコア表示
- マッチング履歴
- フィードバック学習

**マッチングアルゴリズム**:
```
スコア計算 = 
  業種適合度 × 30% +
  地域適合度 × 20% +
  実績適合度 × 25% +
  評価スコア × 15% +
  過去の成功率 × 10%
```

**想定画面**:
```
┌─────────────────────────────────────────┐
│ 案件「新規システム開発」に最適なパートナー│
├─────────────────────────────────────────┤
│ 適合度: 95%                             │
│ 🏢 株式会社テックソリューション        │
│    業種: IT（完全一致）                 │
│    地域: 東京都（希望地域内）           │
│    実績: システム開発 10件              │
│    [詳細] [オファー送信]                │
│                                         │
│ 適合度: 87%                             │
│ 🏢 株式会社デジタルパートナーズ        │
│    業種: IT（完全一致）                 │
│    地域: 神奈川県（隣接地域）           │
│    実績: システム開発 7件               │
│    [詳細] [オファー送信]                │
└─────────────────────────────────────────┘
```

**データ構造**:
```java
// MatchingScore エンティティ
- id
- projectId（案件ID）
- candidateId（候補パートナーID）
- totalScore（総合スコア）
- industryScore（業種適合度）
- regionScore（地域適合度）
- experienceScore（実績適合度）
- ratingScore（評価スコア）
- successRateScore（成功率スコア）
- calculatedAt
```

---

### Phase 3: 教育・育成機能（中優先度）

#### 3.1 eラーニング機能
**目的**: パートナーのスキルアップと教育

**機能詳細**:
- コース管理
- 動画/スライド教材
- 進捗管理
- テスト/クイズ機能
- 修了証発行
- 学習履歴

**コースカテゴリ**:
- 製品知識
- 営業スキル
- 技術トレーニング
- コンプライアンス
- 業界知識

**想定画面**:
```
┌─────────────────────────────────────────┐
│ eラーニング - コース一覧                │
├─────────────────────────────────────────┤
│ 📚 製品Aベーシックコース                │
│    進捗: ████░░░░░░ 40%                 │
│    残り: レッスン3/5                    │
│    [続きから学習]                       │
│                                         │
│ 📚 営業スキル向上コース                 │
│    進捗: ██████████ 100%                │
│    修了日: 2026-01-15                   │
│    [修了証ダウンロード]                 │
│                                         │
│ 📚 コンプライアンス研修                 │
│    進捗: ░░░░░░░░░░ 0%                  │
│    期限: 2026-02-28                     │
│    [学習開始]                           │
└─────────────────────────────────────────┘
```

**データ構造**:
```java
// Course エンティティ
- id
- title（コースタイトル）
- category（カテゴリ）
- description（説明）
- duration（所要時間）
- passingScore（合格点）
- isRequired（必須フラグ）
- createdBy
- createdAt

// Lesson エンティティ
- id
- courseId
- title（レッスンタイトル）
- content（コンテンツ）
- contentType（タイプ: VIDEO / SLIDE / TEXT）
- duration（所要時間）
- order（順序）

// LearningProgress エンティティ
- id
- courseId
- userId
- partnerId
- currentLessonId
- progress（進捗率）
- score（テストスコア）
- status（ステータス: IN_PROGRESS / COMPLETED / FAILED）
- startedAt
- completedAt

// Certificate エンティティ
- id
- courseId
- userId
- partnerId
- issuedAt
- certificateUrl（修了証PDF URL）
```

---

### Phase 4: CRM連携機能（低優先度）

#### 4.1 CRMツール連携
**目的**: 既存CRMシステムとのデータ連携

**対応CRM**:
- Salesforce
- HubSpot
- Zoho CRM
- Microsoft Dynamics 365

**連携機能**:
- パートナー情報の同期
- 案件情報の同期
- 活動履歴の連携
- 請求情報の連携
- 双方向同期

**データフロー**:
```
PRMTool ←→ CRM

同期データ:
- パートナー基本情報
- 案件情報
- コンタクト履歴
- 請求・支払情報
```

**実装技術**:
- REST API
- OAuth 2.0認証
- Webhook
- データマッピング
- エラーハンドリング

---

## 📊 機能比較マトリクス

| 機能カテゴリ | 機能 | CoPASS | PRMTool v2.1 | 提案Phase |
|-------------|------|--------|--------------|-----------|
| **代理店開拓** | 代理店検索 | ✅ | ❌ | Phase 2 |
| **代理店開拓** | 代理店オファー | ✅ | ❌ | Phase 2 |
| **代理店開拓** | 自動マッチング | ✅ | ❌ | Phase 2 |
| **代理店活性化** | コンテンツ共有 | ✅ | ❌ | Phase 1 |
| **代理店活性化** | eラーニング | ✅ | ❌ | Phase 3 |
| **代理店活性化** | チャット | ✅ | ❌ | Phase 1 |
| **代理店活性化** | ダッシュボード | ✅ | ✅ | - |
| **代理店管理** | 業務データ一元管理 | ✅ | ✅ | - |
| **代理店管理** | 手数料自動集計 | ✅ | ✅ | - |
| **代理店管理** | 請求書発行 | ✅ | ✅ | - |
| **代理店管理** | 請求書送付 | ✅ | ❌ | Phase 1 |
| **代理店管理** | CRMツール連携 | ✅ | ❌ | Phase 4 |

---

## 🎯 開発ロードマップ

### v3.0.0 (Phase 1) - 2026年Q2目標
**テーマ**: コミュニケーション強化

実装機能:
- ✅ チャット機能
- ✅ コンテンツ共有機能
- ✅ 請求書送付機能

期待される効果:
- パートナーとのコミュニケーションが円滑化
- 情報共有の効率化
- 請求業務の自動化

---

### v3.5.0 (Phase 2) - 2026年Q3目標
**テーマ**: パートナー開拓支援

実装機能:
- ✅ 代理店検索機能
- ✅ 代理店オファー機能
- ✅ 自動マッチング機能

期待される効果:
- 新規パートナー獲得の効率化
- マッチング精度の向上
- 営業活動の自動化

---

### v4.0.0 (Phase 3) - 2026年Q4目標
**テーマ**: 教育・育成支援

実装機能:
- ✅ eラーニング機能

期待される効果:
- パートナーのスキル向上
- 研修コスト削減
- 標準化された教育プログラム

---

### v4.5.0 (Phase 4) - 2027年Q1目標
**テーマ**: 外部連携強化

実装機能:
- ✅ CRMツール連携

期待される効果:
- データの一元管理
- 業務効率の向上
- 既存システムとのシームレスな連携

---

## 💡 追加提案

### PRMToolの独自機能（CoPASSにない機能）

#### 1. パートナー整合性チェック（v2.1.0実装済み）
**特徴**: データ整合性を保証する独自機能
**優位性**: 請求ミスを防止、データ品質向上

#### 2. 多言語対応（提案）
**目的**: グローバル展開への対応
**実装**: 日本語、英語、中国語など

#### 3. モバイルアプリ（提案）
**目的**: 外出先からのアクセス
**実装**: React Native、Flutter

#### 4. API公開（提案）
**目的**: サードパーティとの連携
**実装**: RESTful API、API Key認証

#### 5. レポート機能強化（提案）
**目的**: より詳細な分析
**実装**:
- カスタムレポート作成
- スケジュール実行
- PDF/Excel出力
- グラフ可視化

---

## 📝 まとめ

### 優先的に実装すべき機能（Phase 1）

1. **チャット機能** - パートナーとのリアルタイムコミュニケーション
2. **コンテンツ共有機能** - 情報提供の効率化
3. **請求書送付機能** - 請求業務の完全自動化

### 中長期的に検討すべき機能（Phase 2-4）

4. **代理店検索・オファー機能** - 新規パートナー開拓
5. **自動マッチング機能** - AI活用
6. **eラーニング機能** - パートナー教育
7. **CRMツール連携** - 既存システム統合

### 現在の強み

- ✅ 手数料管理の高精度
- ✅ パートナー整合性チェック
- ✅ ロールベース権限管理
- ✅ 包括的なダッシュボード

---

**次のステップ**: Phase 1の詳細設計と実装計画の策定
